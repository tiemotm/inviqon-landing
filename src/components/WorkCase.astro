---
import { Image } from "astro:assets";
import type { WorkItem } from "../lib/work";

const { item } = Astro.props as { item: WorkItem };
---

<section class="relative">
  <!-- top gradient like your cards -->
  <div class={`absolute inset-x-0 -top-24 h-[420px] bg-gradient-to-br ${item.coverGradient} opacity-40 blur-2xl`} aria-hidden="true"></div>

  <div class="mx-auto max-w-5xl px-5 py-10 md:py-14">
    <div class="flex items-start justify-between gap-6">
      <div>
        <p class="text-xs tracking-[0.24em] text-white/55">CASE</p>
        <h1 class="mt-4 text-3xl font-semibold tracking-tight text-white/95 md:text-5xl">
          {item.name}
        </h1>
        <p class="mt-4 text-base leading-relaxed text-white/65 md:text-lg">
          {item.tagline}
        </p>
      </div>

      <span class="shrink-0 rounded-full px-3 py-1.5 text-[11px] font-semibold ring-1 ring-white/10 bg-white/5 text-white/70">
        {item.status}
      </span>
    </div>

    <!-- Screenshot block -->
    <div class="mt-8 overflow-hidden rounded-3xl ring-1 ring-white/10">
      <div class={`relative bg-gradient-to-br ${item.coverGradient}`}>
        <div class="absolute inset-0 bg-black/35"></div>

        <div class="relative p-4 md:p-6">
          <div class="rounded-2xl bg-black/25 ring-1 ring-white/10 p-3">
            {item.coverImage ? (
              <Image
                src={item.coverImage}
                alt={`${item.name} screenshot`}
                class="w-full rounded-xl object-cover"
                loading="lazy"
              />
            ) : (
              <div class="aspect-[16/9] w-full rounded-xl bg-white/5"></div>
            )}
          </div>
        </div>
      </div>
    </div>

    <!-- Highlights -->
    <div class="mt-8 grid gap-3 md:grid-cols-3">
      {item.highlights.map((h) => (
        <div class="rounded-2xl glass px-5 py-5">
          <p class="text-xs tracking-[0.18em] uppercase text-white/45">{h.label}</p>
          <p class="mt-2 text-sm font-semibold text-white/85">{h.value}</p>
        </div>
      ))}
    </div>

    <!-- Two columns -->
    <div class="mt-4 grid gap-4 md:grid-cols-2">
      <section class="rounded-2xl glass px-6 py-6">
        <h2 class="text-sm font-semibold text-white/90">Overview</h2>
        <p class="mt-3 text-sm leading-relaxed text-white/70">{item.description}</p>
      </section>

      <section class="rounded-2xl glass px-6 py-6">
        <h2 class="text-sm font-semibold text-white/90">Stack</h2>
        <div class="mt-4 flex flex-wrap gap-2">
          {item.stack.map((t) => (
            <span class="rounded-full bg-white/5 px-2.5 py-1 text-[11px] text-white/65 ring-1 ring-white/10">
              {t}
            </span>
          ))}
        </div>

        <div class="mt-6 h-px w-full bg-gradient-to-r from-transparent via-white/15 to-transparent"></div>

        <p class="mt-5 text-xs tracking-[0.18em] uppercase text-white/45">Timeline</p>
        <p class="mt-2 text-sm text-white/70">{item.year ?? "—"}</p>
      </section>
    </div>

    <section class="mt-4 rounded-2xl glass px-6 py-6">
      <h2 class="text-sm font-semibold text-white/90">Role & scope</h2>
      <ul class="mt-4 space-y-2 text-sm text-white/70">
        {item.role.map((r) => (
          <li class="flex gap-2">
            <span class="mt-[6px] h-1.5 w-1.5 rounded-full bg-white/25"></span>
            <span>{r}</span>
          </li>
        ))}
      </ul>
    </section>

    <div class="mt-8 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
      <div class="flex items-center gap-3">
        <a
          href="/work"
          class="rounded-xl bg-white/5 px-5 py-2.5 text-sm font-semibold text-white/70 ring-1 ring-white/10 transition hover:bg-white/10 hover:text-white"
        >
          ← All work
        </a>

        <a
          href="/#contact"
          class="rounded-xl bg-white/10 px-5 py-2.5 text-sm font-semibold text-white ring-1 ring-white/10 transition hover:bg-white/15"
        >
          Start a project →
        </a>
      </div>

      {item.website ? (
        <a
          href={item.website}
          target="_blank"
          rel="noreferrer"
          class="text-sm font-medium text-white/70 transition hover:text-white"
        >
          Open project site ↗
        </a>
      ) : null}
    </div>
  </div>
</section>